//*********************************************************************************************************************
package spark.platform;
//*********************************************************************************************************************

import com.jogamp.newt.opengl.GLWindow;
import com.jogamp.opengl.GLCapabilities;
import com.jogamp.opengl.GLProfile;

//*********************************************************************************************************************
public class Platform implements PlatformWindow {

	//=================================================================================================================
	private GLWindow glWindow;
	private GLEventHandler glHandler;
	private NEWTInputHandler newtInputHandler;
	//=================================================================================================================
	
	//=================================================================================================================
	public Platform() {
		var glProfile = GLProfile.getDefault();
		var glCapabilities = new GLCapabilities(glProfile);
		glWindow = GLWindow.create(glCapabilities);
		glHandler = new GLEventHandler();
		newtInputHandler = new NEWTInputHandler();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void init() {
		initWindow();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void update() {
		windowUpdate();
	}
	//=================================================================================================================
	
	//=================================================================================================================
	private void initWindow() {
		glWindow.setSize(800, 600);
		glWindow.setTitle("SPARK - Application Window");
		glWindow.addGLEventListener(glHandler);
		glWindow.addMouseListener(newtInputHandler);
		glWindow.addKeyListener(newtInputHandler);
		glWindow.setVisible(true);
	}
	//=================================================================================================================

	//=================================================================================================================
	public String windowTitle() {
		return glWindow.getTitle();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void windowTitle(String title) {
		glWindow.setTitle(title);
	}
	//=================================================================================================================

	//=================================================================================================================
	public int windowWidth() {
		return glWindow.getWidth();
	}
	//=================================================================================================================

	//=================================================================================================================
	public int windowHeight() {
		return glWindow.getHeight();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void windowSize(int width, int height) {
		glWindow.setSize(width, height);
	}
	//=================================================================================================================

	//=================================================================================================================
	public boolean windowVisible() {
		return glWindow.isVisible();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void windowVisible(boolean visible) {
		glWindow.setVisible(visible);
	}
	//=================================================================================================================

	//=================================================================================================================
	public boolean windowFullscreen() {
		return glWindow.isFullscreen();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void windowFullscreen(boolean fullscreen) {
		glWindow.setFullscreen(fullscreen);
	}
	//=================================================================================================================

	//=================================================================================================================
	public ResizeHandler windowResize() {
		return glHandler.resize();
	}
	//=================================================================================================================
	
	//=================================================================================================================
	public void windowResize(ResizeHandler handler) {
		glHandler.resize(handler);
	}
	//=================================================================================================================

	//=================================================================================================================
	public void windowUpdate() {
		glWindow.display();
	}
	//=================================================================================================================

	//=================================================================================================================
	public GraphicsHandler graphics() {
		return glHandler.graphics();
	}
	//=================================================================================================================
	
	//=================================================================================================================
	public void graphics(GraphicsHandler handler) {
		glHandler.graphics(handler);
	}
	//=================================================================================================================

	//=================================================================================================================
	public InputHandler input() {
		return newtInputHandler.input();
	}
	//=================================================================================================================
	
	//=================================================================================================================
	public void input(InputHandler handler) {
		newtInputHandler.input(handler);
	}
	//=================================================================================================================
	
}
//*********************************************************************************************************************
