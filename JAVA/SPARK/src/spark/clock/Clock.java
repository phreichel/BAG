//*********************************************************************************************************************
package spark.clock;
//*********************************************************************************************************************

import java.util.ArrayList;
import java.util.List;

//*********************************************************************************************************************
public class Clock {

	//=================================================================================================================
	private long mark;
	private List<Schedule> schedules = new ArrayList<>();
	//=================================================================================================================

	//=================================================================================================================
	public void start() {
		mark = System.nanoTime();
	}
	//=================================================================================================================

	//=================================================================================================================
	public void update() {
		long now = System.nanoTime();
		long delta = now-mark;
		mark = now;		
		for (var schedule : schedules) {
			schedule.update(delta);
		}
	}
	//=================================================================================================================

	//=================================================================================================================
	public Schedule create(long period) {
		var schedule = new Schedule(this, period);
		this.schedules.add(schedule);
		return schedule;
	}
	//=================================================================================================================
	
	//=================================================================================================================
	public void dispose(Schedule schedule) {
		this.schedules.remove(schedule);
	}
	//=================================================================================================================

}
//*********************************************************************************************************************
