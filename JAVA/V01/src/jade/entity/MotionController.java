//**************************************************************************************************
package jade.entity;
//**************************************************************************************************

import lombok.Getter;
import lombok.Setter;

//**************************************************************************************************
public class MotionController implements Component {

	//==============================================================================================
	private float speedForward = 5f;
	private float speedUp = 5f;
	private float speedRight = 5f;
	//==============================================================================================

	//==============================================================================================
	private float speedPitch = (float) Math.toRadians(30f);
	private float speedYaw = (float) Math.toRadians(30f);
	private float speedRoll = (float) Math.toRadians(30f);
	//==============================================================================================
	
	//==============================================================================================
	@Getter @Setter private float throttleForward = 0f;
	@Getter @Setter private float throttleUp = 0f;
	@Getter @Setter private float throttleRight = 0f;
	//==============================================================================================

	//==============================================================================================
	@Getter @Setter private float throttlePitchUp = 0f;
	@Getter @Setter private float throttleYawLeft = 0f;
	@Getter @Setter private float throttleRollLeft = 0f;
	//==============================================================================================
	
	//==============================================================================================
	 @Getter @Setter private PoseComponent poseComponent = null;
	//==============================================================================================

	//==============================================================================================
	public String getKey() {
		return Component.KEY_MOTION;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void addThrottleForward(float dt) {
		throttleForward += dt;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void addThrottleUp(float dt) {
		throttleUp += dt;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void addThrottleRight(float dt) {
		throttleRight += dt;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void addThrottlePitchUp(float dt) {
		throttlePitchUp += dt;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void addThrottleYawLeft(float dt) {
		throttleYawLeft += dt;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void addThrottleRollLeft(float dt) {
		throttleRollLeft += dt;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void update(float dT) {
		if (poseComponent != null) {
			
			float dRX = throttlePitchUp * speedPitch * dT;
			float dRY = throttleYawLeft * speedYaw * dT;
			float dRZ = throttleRollLeft * speedRoll * dT;
			
			poseComponent.addRotZ(dRZ);
			poseComponent.addRotY(dRY);
			poseComponent.addRotX(dRX);

			float dZ = - throttleForward * speedForward *  dT;
			float dY =   throttleUp * speedUp  * dT;
			float dX =   throttleRight * speedRight * dT;

			poseComponent.addPositionLocal(dX, dY, dZ);
			
		}
	}
	//==============================================================================================
	
}
//**************************************************************************************************
