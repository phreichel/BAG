//**************************************************************************************************
package jade.clock;
//**************************************************************************************************

//**************************************************************************************************
public class Schedule {

	//==============================================================================================
	private long period;
	private long mark;
	private Task task = null;
	//==============================================================================================

	//==============================================================================================
	public Schedule(long period, Task task) {
		this.period = period;
		this.task = task;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void init(long now) {
		mark = now;
	}
	//==============================================================================================
	
	//==============================================================================================
	public void update(long now) {
		long count = (now - mark) / period;
		if (count > 0L)  {
			mark += count * period;
			if (task != null) {
				task.perform(period, count);
			}
		}
	}
	//==============================================================================================
	
}
//**************************************************************************************************
