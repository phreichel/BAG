//*************************************************************************************************
package rp.application;
//*************************************************************************************************

import rp.platform.Platform;
import rp.surface.Surface;

//*************************************************************************************************
public class Application {

	//=============================================================================================
	private final Platform platform;
	private final Surface surface;
	private final Clock clock;
	//=============================================================================================
	
	//=============================================================================================
	public Application() {
		platform = new Platform();
		surface = new Surface();
		clock = new Clock();
	}
	//=============================================================================================

	//=============================================================================================
	private void init() {
		platform.init();
		surface.init();
		clock.init();
	}
	//=============================================================================================

	//=============================================================================================
	private void loop() {
		while (true) {
			update();
		}
	}
	//=============================================================================================

	//=============================================================================================
	private void update() {
		switch (clock.segment()) {
			case 0 -> {
				surface.update();
			}
			case 1 -> {}
			case 2 -> {}
			case 3 -> {}
			case 4 -> {}
			case 5 -> {}
			case 6 -> {}
			case 7 -> {
				platform.update();
			}
		}		
		clock.update();
	}
	//=============================================================================================
	
	//=============================================================================================
	private void done() {
		platform.done();
	}
	//=============================================================================================
	
	//=============================================================================================
	public void run() {
		init();
		loop();
		done();
	}
	//=============================================================================================
	
}
//*************************************************************************************************
