//************************************************************************************************
package core.input.virtual;
//************************************************************************************************

import core.input.mapping.AxisMapping;
import core.input.mapping.InputState;
import core.input.raw.InputAxis;
import core.input.raw.InputEvent;

//************************************************************************************************
public class VirtualInputAxis extends AxisMapping implements IVirtualAxis {

	//============================================================================================
	private final String  ident;
	private       boolean hasChanged = true;
	private       float   value      = 0f;
	//============================================================================================

	//============================================================================================
	public VirtualInputAxis(
			String ident,
			InputAxis axis,
			InputAxis ... modifiers) {
		super(axis, modifiers);
		this.onValue = this::onValue;
		this.onLoss  = this::onLoss;
		this.ident = ident;
	}
	//============================================================================================

	//============================================================================================
	private void onValue(InputEvent event, InputState state) {
		this.value = event.value;
		this.hasChanged = true;		
	}
	//============================================================================================

	//============================================================================================
	private void onLoss(InputEvent event, InputState state) {
		// ignored for this
	}
	//============================================================================================
	
	//============================================================================================
	@Override
	public String getIdent() {
		return this.ident;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public boolean hasChanged() {
		return this.hasChanged;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public void confirmChanged() {
		this.hasChanged = false;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public float getValue() {
		return this.value;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public void update(int nFrames, long periodNs) {
		// ignored for this
	}
	//============================================================================================
	
}
//************************************************************************************************
