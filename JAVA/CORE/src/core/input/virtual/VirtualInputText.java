//************************************************************************************************
package core.input.virtual;
//************************************************************************************************

import core.input.mapping.InputState;
import core.input.mapping.TextMapping;
import core.input.raw.InputEvent;

//************************************************************************************************
public class VirtualInputText extends TextMapping implements IVirtualText {

	//============================================================================================
	private final String  ident;
	private       boolean hasChanged = true;
	private       String  value      = "";
	//============================================================================================

	//============================================================================================
	public VirtualInputText(String ident) {
		super();
		this.onText = this::onText;
		this.ident = ident;
	}
	//============================================================================================

	//============================================================================================
	private void onText(InputEvent event, InputState state) {
		this.value += event.character;
		this.hasChanged = true;		
	}
	//============================================================================================

	//============================================================================================
	@Override
	public String getIdent() {
		return this.ident;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public boolean hasChanged() {
		return this.hasChanged;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public void confirmChanged() {
		this.value = "";
		this.hasChanged = false;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public String getValue() {
		return this.value;
	}
	//============================================================================================

	//============================================================================================
	@Override
	public void update(int nFrames, long periodNs) {
		// ignored for this
	}
	//============================================================================================
	
}
//************************************************************************************************
