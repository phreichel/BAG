//*****************************************************************************
package cody;
//*****************************************************************************

//*****************************************************************************
public class Application {

	//=========================================================================
	private static Application application;
	//=========================================================================

	//=========================================================================
	public static Application get() {
		if (application == null) {
			application = new Application();
		}
		return application;
	}
	//=========================================================================
	
	//=========================================================================
	private Graphics graphics;
	//=========================================================================

	//=========================================================================
	private void init() {
		graphics = Graphics.get();
		graphics.title("CODY APP TITLE");
	}
	//=========================================================================
	
	//=========================================================================
	private void update() {
		graphics.update();
	}
	//=========================================================================

	//=========================================================================
	private void loop() {
		long mark = System.nanoTime();
		while (true) {
			long clock = System.nanoTime();
			long delta = clock - mark; 
			if (delta >= 1000000L) {
				mark += 1000000L;
				update();
			}
			Thread.yield();
		}
	}
	//=========================================================================

	//=========================================================================
	private void done() {
		graphics.done();
	}
	//=========================================================================
	
	//=========================================================================
	public void run() {
		init();
		loop();
		done();
	}
	//=========================================================================
	
}
//*****************************************************************************
