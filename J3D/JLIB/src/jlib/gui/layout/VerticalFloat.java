//*************************************************************************************************
package jlib.gui.layout;
//*************************************************************************************************

import jlib.gui.Element;

//*************************************************************************************************
public class VerticalFloat implements Layout {

	//=============================================================================================
	private Direction direction = Direction.REGULAR;
	private float gap = 0f;
	//=============================================================================================

	//=============================================================================================
	public Direction direction() {
		return direction;
	}
	//=============================================================================================

	//=============================================================================================
	public void direction(Direction direction) {
		this.direction = direction;
	}
	//=============================================================================================

	//=============================================================================================
	public float gap() {
		return gap;
	}
	//=============================================================================================

	//=============================================================================================
	public void gap(float gap) {
		this.gap = gap;
	}
	//=============================================================================================

	//=============================================================================================
	public void apply(Element element) {
		switch (direction) {
			case REVERSE: applyReverse(element); break;
			default: applyRegular(element); break;
		}
	}
	//=============================================================================================
	
	//=============================================================================================
	private void applyRegular(Element element) {
		
		int n = element.elements();
		if (n==0) return;
		
		float x = 0;
		float y = 0;
		
		for (int i=0; i<n; i++) {

			int idx = i;
			var child = element.element(idx);

			child.position(x, y);
			
			float w = element.width();
			float h = child.height();

			child.size(w, h);
			
			y += h + gap;
			
		}
		
	}
	//=============================================================================================

	//=============================================================================================
	private void applyReverse(Element element) {
		
		int n = element.elements();
		if (n==0) return;
		
		float x = 0;
		float y = element.height();
		
		for (int i=0; i<n; i++) {

			int idx = element.elements() - i - 1;
			var child = element.element(idx);

			float w = element.width();
			float h = child.height();
			
			y -= h;
			
			child.position(x, y);
			child.size(w, h);
			
			y -= gap;
			
		}
		
	}
	//=============================================================================================

}
//*************************************************************************************************
