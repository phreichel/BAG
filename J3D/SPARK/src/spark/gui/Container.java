//*********************************************************************************************************************
package spark.gui;
//*********************************************************************************************************************

import java.util.ArrayList;
import java.util.List;

import spark.platform.Graphics;

//*********************************************************************************************************************
public class Container {

	//=================================================================================================================
	private List<Component> list;
	private Component component;
	//=================================================================================================================

	//=================================================================================================================
	public Container() {
		list = new ArrayList<>();
	}
	//=================================================================================================================

	//=================================================================================================================
	public Component component() {
		return component;
	}
	//=================================================================================================================

	//=================================================================================================================
	public void component(Component c) {
		component = c;
	}
	//=================================================================================================================

	//=================================================================================================================
	public int items() {
		return list.size();
	}
	//=================================================================================================================

	//=================================================================================================================
	public Component item(int idx) {
		return list.get(idx);
	}
	//=================================================================================================================

	//=================================================================================================================
	//TODO: possibly inform former container?
	public void item(Component c) {
		if (c.container() != null) {
			c.container().list.remove(c);
		}
		list.add(c);
		c.container(this);
	}
	//=================================================================================================================
	
	//=================================================================================================================
	public void resize(
		float oldWidth, float oldHeight,
		float newWidth, float newHeight) {
		for (var c : list) {
			c.handleContainerResized(
				oldWidth, oldHeight,
				newWidth, newHeight);
		}
	}
	//=================================================================================================================

	//=================================================================================================================
	public void layout(Graphics g) {
		for (int i=0; i<list.size(); i++) {
			var c = list.get(i);
			c.layout(g);
		}
	}
	//=================================================================================================================
	
	//=================================================================================================================
	public void render(Graphics g) {
		for (int i=0; i<list.size(); i++) {
			var c = list.get(list.size() - i - 1);
			g.push(c.x(), c.y());
			c.render(g);
			g.pop();
		}
	}
	//=================================================================================================================

	//=================================================================================================================
	public void handleInput(InputContext context) {
		for (var c : list) {
			context.enter(c);
			c.handleInput(context);
			context.exit(c);
		}
	}
	//=================================================================================================================

}
//*********************************************************************************************************************
